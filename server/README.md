﻿﻿﻿# Flutterwave Developer Challenge API Server side documentation## API DocumentationThis API uses `POST`, `GET`,`DELETE`, `PUT`  requests to communicate and HTTP [response codes]to indicate status and errors. All responses come in standard JSON while requests have an application/json content-body with the body in standard JSON format### Response Codes```http200: Success400: Bad request401: Unauthorized404: Cannot be found405: Method not allowed50X: Server Error```### Error Codes Details```http400: Bad Request401: Unauthorized500: Internal Server Error502: Bad Gateway```## Endpoints# Initial Payment**Descrpition:** This endpoint allows a new shop to make their initial $20 payment without which they cannot set up an account on Jumga**Request:** Payment details and appropriate url string (as depicted on flutterwave v3 api docs) chosen from frontend depending on country, bank, and other details**Response:** Transaction status**Request body:**```jsonPOST /initial-payment HTTP/1.1Accept: application/jsonContent-Type: application/json{   "tx_ref":"MC-1585230ew9v5050e8",   "amount":"100",   "account_bank":"044",   "account_number":"0690000032",   "currency":"NGN",   "url": "https://api.flutterwave.com/v3/charges?type=debit_ng_account",   "email":"user@flw.com",   "phone_number":"0902620185",   "fullname":"Yemi Desola"}```**Successful Response:**```jsonHTTP/1.1 200 OKServer: Jumga RESTful APIContent-Type: application/json{  "status": "success",  "message": "Charge initiated",  "data": {    "id": 1848000,    "tx_ref": "MC-1585230ew9v5050e8",    "flw_ref": "URF_1610998248446_3709535",    "device_fingerprint": "N/A",    "amount": 100,    "charged_amount": 100,    "app_fee": null,    "merchant_fee": 0,    "processor_response": "Pending OTP validation",    "auth_model": "AUTH",    "currency": "NGN",    "ip": "::ffff:10.30.108.123",    "narration": "DevAyo",    "status": "pending",    "auth_url": "NO-URL",    "payment_type": "account",    "fraud_status": "ok",    "created_at": "2021-01-18T19:30:48.000Z",    "account_id": 676924,    "customer": {      "id": 558930,      "phone_number": "0902620185",      "name": "Yemi Desola",      "email": "user@flw.com",      "created_at": "2021-01-06T16:42:06.000Z"    },    "account": {      "account_number": "0690000032",      "bank_code": "044",      "account_name": "NO-NAME NO-LNAME"    },    "meta": {      "authorization": {        "mode": "otp",        "validate_instructions": "Please validate with the OTP sent to your mobile or email"      }    }  }}```**Failed Response:**```jsonHTTP/1.1 400 Bad requestServer: Jumga RESTful API{  "status": "error",  "message": "Invalid payment type provided",  "data": null}```#Card Payments**Description:** Makes card payments for customers and sends payment details (including the item purchased and shop purchased from) to the transactions DB**Request:**  Card payment details and the appropriate flutter URL from the frontend.**Response:** Response details from the card payment**Request body:**```jsonPOST /card-payment HTTP/1.1Accept: application/jsonContent-Type: application/json{   "card_number":"4556052704172643",   "cvv":"899",   "expiry_month":"01",   "expiry_year":"21",   "currency":"NGN",   "amount":"3000",   "fullname":"Yemi Desola",   "email":"user@flw.com",   "tx_ref":"MC-3243e",   "authorization":{      "mode":"pin",      "pin":"3310"   },	"merchant_id": 1,	"item_id": 2,	"delivery_value": 200	}```**Successful Response:**```jsonHTTP/1.1 200 OKServer: Jumga RESTful APIContent-Type: application/json{   "status":"success",   "message":"Charge authorization data required",   "meta":{      "authorization":{         "mode":"pin",         "fields":[            "pin"         ]      }   }}```**Failed Response:**```jsonHTTP/1.1 401 UnauthorizedServer: PE_GRID RESTful APIContent-Type: application/json{    "code": 401,    "message": "invalid crendetials",    "resolve": "The username is not correct."}```#Account Payment**Descrpition:** This is the endpoint to call when customers want to make payments via direct debit from their accounts**Request:** Account details and appropriate url string (as depicted on flutterwave v3 api docs) chosen from frontend depending on country, bank, and other details**Response:** Transaction status**Request body:**```jsonPOST /account-payment HTTP/1.1Accept: application/jsonContent-Type: application/json{   "tx_ref":"MC-1585230ew9v5050e8",   "amount":"100",   "account_bank":"044",   "account_number":"0690000032",   "currency":"NGN",   "url": "https://api.flutterwave.com/v3/charges?type=debit_ng_account",   "email":"user@flw.com",   "phone_number":"0902620185",   "fullname":"Yemi Desola"}```**Successful Response:**```jsonHTTP/1.1 200 OKServer: Jumga RESTful APIContent-Type: application/json{  "status": "success",  "message": "Charge initiated",  "data": {    "id": 1848085,    "tx_ref": "MC-1585230ew9v5050e8",    "flw_ref": "URF_1611001805574_5813735",    "device_fingerprint": "N/A",    "amount": 100,    "charged_amount": 100,    "app_fee": null,    "merchant_fee": 0,    "processor_response": "Pending OTP validation",    "auth_model": "AUTH",    "currency": "NGN",    "ip": "::ffff:10.61.189.68",    "narration": "DevAyo",    "status": "pending",    "auth_url": "NO-URL",    "payment_type": "account",    "fraud_status": "ok",    "created_at": "2021-01-18T20:30:05.000Z",    "account_id": 676924,    "customer": {      "id": 558930,      "phone_number": "0902620185",      "name": "Yemi Desola",      "email": "user@flw.com",      "created_at": "2021-01-06T16:42:06.000Z"    },    "account": {      "account_number": "0690000032",      "bank_code": "044",      "account_name": "NO-NAME NO-LNAME"    },    "meta": {      "authorization": {        "mode": "otp",        "validate_instructions": "Please validate with the OTP sent to your mobile or email"      }    }  }}```**Failed Response:**```jsonHTTP/1.1 400 Bad requestServer: Jumga RESTful API{  "status": "error",  "message": "Invalid payment type provided",  "data": null}```# Shop Creation**Descrpition:** This endpoint creates a new shop **Request:** Shop name and other details**Response:** Shop creation status**Request body:**```jsonPOST /shops HTTP/1.1Accept: application/jsonContent-Type: application/json{"name": "Drab","bank": "Fidelity","account_no": "923302023392","email": "rsa@drab.com.ng","dispatch_rider_id": 1,"country": "NG","password": "password"}```**Successful Response:**```jsonHTTP/1.1 200 OKServer: Jumga RESTful APIContent-Type: application/json{  "data": {    "name": "Drab",    "bank": "Fidelity",    "account_no": "923302023392",    "email": "rsa@drab.com.ng",    "country": "NG",    "created_at": "2021-01-14T15:58:52.880Z"  },  "status": 200,  "message": "Shop created successfully"}```# Customer Creation**Descrpition:** This endpoint creates a new customer**Request:** Customer name and other details**Response:** Customer creation status**Request body:**```jsonPOST /customers HTTP/1.1Accept: application/jsonContent-Type: application/json{"name": "Sliddm","email": "slims@rand.com","phone_number": "2900202020","password": "password"}```**Successful Response:**```jsonHTTP/1.1 200 OKServer: Jumga RESTful APIContent-Type: application/json{  "data": {    "name": "Sliddm",    "email": "slims@rand.com",    "phone_number": "2900202020",    "created_at": "2021-01-08T20:23:01.820Z"  },  "status": 200,  "message": "Customer created successfully"}```# Item Creation**Descrpition:** This endpoint creates a new item in the Jumga database**Request:** Item name and other details**Response:** Item creation status**Request body:**```jsonPOST /items HTTP/1.1Accept: application/jsonContent-Type: application/json{"name": "Mac","merchant_id": 2,"image": "amd","price": 340000}```**Successful Response:**```jsonHTTP/1.1 200 OKServer: Jumga RESTful APIContent-Type: application/json{  "data": {    "name": "Mac",    "merchant_id": "2",    "image": "amd",    "price": "340000",    "created_at": "2021-01-06T11:35:15.314Z"  },  "status": 200,  "message": "Item created successfully"}```